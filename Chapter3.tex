\chapter{Problem Statement}


\section{Multi level data input}


In the previous chapter it has been discussed how can we implement simple data input forms within the VIVO framework. The simplicity of the illustrated problems lied in that the number of instances which were created through the forms was constant, in particular one, and only their types and literal attributes were set by the user through HTML input elements. Nevertheless there are such entities that are more complex, and they consist of several sub part, that are represented in the ontology with further classes. Such as a skeletal subdivision consists of bone organs, or a study design execution consists of assays, which consist of input bones and output data. Consequently the RDF dataset for such entities incorporates a set of instances organized into a tree structure (\figref{ps1}, where the green node is that main instance).

\img{\III}{ps1.png}{RDF triples for complex entities}{ps1}


This means in terms of the data input form that it has to offer such interface elements which allows the user to add the components step by step. Since these sub components are such RDF instances like the main instance they appear on the form as sub forms with selectors and literal fields. 


\img{\III}{ps2.png}{Multi level form}{ps2}


\figref{ps2} shows the layout of the form for multi level data. Each for each instance the form offers a selector for its type and text field for its label. The field \textit{Components} has a button (+), which allows the addition of the sub forms. The sub form has as well a dynamic field for sub sub form. To realize such functionality a JavaScript routine is needed that adds the sub forms to the appropriate fields. 
Furthermore this hierarchical form layout requires an appropriate data structure. By static forms from the previous chapter, the HTML \textit{<form/>} element created automatically the HTTP request with the key-value pairs. But in this case JavaScript has to put the data created by the user into a JSON object. This data objects contains as well key value pair, but there is at least one key, where the value is a array of further objects. 


\begin{lstlisting}[basicstyle=\footnotesize, frame=single, caption={Multi level form data in JSON}, label=multiData, captionpos=b, belowskip=1em, aboveskip=2em]
{	type : "eq:elementA",
	label : "Element_4391",
	components : [
		{ type : "eq:componentA1",
		  label : "Component_8531",	
		  subComponents : [ { ... } ],
		},
		{ ... }
	]
}
\end{lstlisting}

Listing \ref{multiData} shows the JSON object generated during by form from \figref{ps2}. The objects are surrounded with ("\{\}"), while the arrays with ("[]"). So the most fundamental task of form handler JavaScript routine is to create new data object if new sub forms are added, and push them to the appropriate array in the form data. 


\img{\III}{ps3.png}{Ontology}{ps3}


\section{Solution scheme}

